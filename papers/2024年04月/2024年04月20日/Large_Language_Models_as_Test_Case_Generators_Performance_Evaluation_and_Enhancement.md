# 将大型语言模型用作测试用例生成器：对性能进行评估并探索提升之道。

发布时间：2024年04月20日

`LLM应用` `软件工程` `测试用例生成`

> Large Language Models as Test Case Generators: Performance Evaluation and Enhancement

# 摘要

> 大型语言模型（LLMs）在代码生成领域的应用已经取得了显著成就，而测试用例的生成同样对于保障代码的质量和可靠性不可或缺。尽管如此，利用LLMs来生成测试用例的相关研究还相对匮乏。目前的研究多集中于通过LLMs生成的测试用例来提升代码生成的质量，而对于LLMs在独立生成测试用例方面的效能尚未进行全面评估。为了填补这一研究空白，我们开展了深入的实验，以探究LLMs生成高质量测试用例的能力。实验结果显示，面对日益复杂的问题，即便是最先进的LLMs也难以生成无误的测试用例，这主要归咎于它们在计算和推理上的局限性。为此，我们提出了一个创新的多代理框架——\emph{TestChain}，它将测试输入与输出的生成过程分离，并通过ReAct格式的对话链让LLMs与Python解释器进行互动，从而生成更精确的测试输出。实验结果证明，TestChain在性能上大幅超越了基线模型，尤其是在测试用例的准确性上，采用GPT-4作为核心的TestChain在LeetCode-hard数据集上实现了13.84%的显著提升。

> Code generation with Large Language Models (LLMs) has been extensively studied and achieved remarkable progress. As a complementary aspect to code generation, test case generation is of crucial importance in ensuring the quality and reliability of code. However, using LLMs as test case generators has been much less explored. Current research along this line primarily focuses on enhancing code generation with assistance from test cases generated by LLMs, while the performance of LLMs in test case generation alone has not been comprehensively examined. To bridge this gap, we conduct extensive experiments to study how well LLMs can generate high-quality test cases. We find that as the problem difficulty increases, state-of-the-art LLMs struggle to generate correct test cases, largely due to their inherent limitations in computation and reasoning. To mitigate this issue, we further propose a multi-agent framework called \emph{TestChain} that decouples the generation of test inputs and test outputs. Notably, TestChain uses a ReAct format conversation chain for LLMs to interact with a Python interpreter in order to provide more accurate test outputs. Our results indicate that TestChain outperforms the baseline by a large margin. Particularly, in terms of the accuracy of test cases, TestChain using GPT-4 as the backbone achieves a 13.84\% improvement over the baseline on the LeetCode-hard dataset.

![将大型语言模型用作测试用例生成器：对性能进行评估并探索提升之道。](../../../paper_images/2404.13340/x1.png)

![将大型语言模型用作测试用例生成器：对性能进行评估并探索提升之道。](../../../paper_images/2404.13340/x2.png)

![将大型语言模型用作测试用例生成器：对性能进行评估并探索提升之道。](../../../paper_images/2404.13340/x3.png)

![将大型语言模型用作测试用例生成器：对性能进行评估并探索提升之道。](../../../paper_images/2404.13340/x4.png)

![将大型语言模型用作测试用例生成器：对性能进行评估并探索提升之道。](../../../paper_images/2404.13340/x5.png)

![将大型语言模型用作测试用例生成器：对性能进行评估并探索提升之道。](../../../paper_images/2404.13340/x6.png)

![将大型语言模型用作测试用例生成器：对性能进行评估并探索提升之道。](../../../paper_images/2404.13340/x7.png)

![将大型语言模型用作测试用例生成器：对性能进行评估并探索提升之道。](../../../paper_images/2404.13340/x8.png)

![将大型语言模型用作测试用例生成器：对性能进行评估并探索提升之道。](../../../paper_images/2404.13340/x9.png)

![将大型语言模型用作测试用例生成器：对性能进行评估并探索提升之道。](../../../paper_images/2404.13340/x10.png)

![将大型语言模型用作测试用例生成器：对性能进行评估并探索提升之道。](../../../paper_images/2404.13340/x11.png)

![将大型语言模型用作测试用例生成器：对性能进行评估并探索提升之道。](../../../paper_images/2404.13340/x12.png)

![将大型语言模型用作测试用例生成器：对性能进行评估并探索提升之道。](../../../paper_images/2404.13340/x13.png)

![将大型语言模型用作测试用例生成器：对性能进行评估并探索提升之道。](../../../paper_images/2404.13340/x14.png)

![将大型语言模型用作测试用例生成器：对性能进行评估并探索提升之道。](../../../paper_images/2404.13340/x15.png)

![将大型语言模型用作测试用例生成器：对性能进行评估并探索提升之道。](../../../paper_images/2404.13340/x16.png)

![将大型语言模型用作测试用例生成器：对性能进行评估并探索提升之道。](../../../paper_images/2404.13340/x17.png)

![将大型语言模型用作测试用例生成器：对性能进行评估并探索提升之道。](../../../paper_images/2404.13340/x18.png)

![将大型语言模型用作测试用例生成器：对性能进行评估并探索提升之道。](../../../paper_images/2404.13340/x19.png)

![将大型语言模型用作测试用例生成器：对性能进行评估并探索提升之道。](../../../paper_images/2404.13340/x20.png)

![将大型语言模型用作测试用例生成器：对性能进行评估并探索提升之道。](../../../paper_images/2404.13340/x21.png)

![将大型语言模型用作测试用例生成器：对性能进行评估并探索提升之道。](../../../paper_images/2404.13340/x22.png)

![将大型语言模型用作测试用例生成器：对性能进行评估并探索提升之道。](../../../paper_images/2404.13340/x23.png)

![将大型语言模型用作测试用例生成器：对性能进行评估并探索提升之道。](../../../paper_images/2404.13340/x24.png)

![将大型语言模型用作测试用例生成器：对性能进行评估并探索提升之道。](../../../paper_images/2404.13340/x25.png)

![将大型语言模型用作测试用例生成器：对性能进行评估并探索提升之道。](../../../paper_images/2404.13340/x26.png)

![将大型语言模型用作测试用例生成器：对性能进行评估并探索提升之道。](../../../paper_images/2404.13340/x27.png)

![将大型语言模型用作测试用例生成器：对性能进行评估并探索提升之道。](../../../paper_images/2404.13340/x28.png)

![将大型语言模型用作测试用例生成器：对性能进行评估并探索提升之道。](../../../paper_images/2404.13340/x29.png)

![将大型语言模型用作测试用例生成器：对性能进行评估并探索提升之道。](../../../paper_images/2404.13340/x30.png)

![将大型语言模型用作测试用例生成器：对性能进行评估并探索提升之道。](../../../paper_images/2404.13340/x31.png)

![将大型语言模型用作测试用例生成器：对性能进行评估并探索提升之道。](../../../paper_images/2404.13340/x32.png)

![将大型语言模型用作测试用例生成器：对性能进行评估并探索提升之道。](../../../paper_images/2404.13340/x33.png)

![将大型语言模型用作测试用例生成器：对性能进行评估并探索提升之道。](../../../paper_images/2404.13340/x34.png)

![将大型语言模型用作测试用例生成器：对性能进行评估并探索提升之道。](../../../paper_images/2404.13340/x35.png)

![将大型语言模型用作测试用例生成器：对性能进行评估并探索提升之道。](../../../paper_images/2404.13340/x36.png)

[Arxiv](https://arxiv.org/abs/2404.13340)