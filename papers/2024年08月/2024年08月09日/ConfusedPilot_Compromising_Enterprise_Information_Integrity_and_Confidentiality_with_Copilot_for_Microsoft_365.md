# ConfusedPilot：通过 Microsoft 365 的 Copilot 威胁企业信息的完整性与保密性

发布时间：2024年08月09日

`RAG` `信息安全`

> ConfusedPilot: Compromising Enterprise Information Integrity and Confidentiality with Copilot for Microsoft 365

# 摘要

> 检索增强生成（RAG）技术，让大型语言模型（LLM）从数据库中提取有用信息并生成响应，正逐渐成为企业日常运营的热门选择。以 Microsoft 365 的 Copilot 为例，它已服务数百万企业。然而，这类基于 RAG 的系统的安全风险仍是一个谜。本研究揭示了 ConfusedPilot 这一类 RAG 系统安全漏洞，这些漏洞可能导致 Copilot 混淆，进而引发响应的完整性和保密性问题。我们首先探讨了在 RAG 提示中嵌入恶意文本的漏洞，这种漏洞会破坏 LLM 生成的响应。接着，我们展示了利用检索缓存机制泄露秘密数据的漏洞。最后，我们分析了这两种漏洞如何被利用，在企业内部散布错误信息，影响其核心运营，如销售和制造。通过深入剖析基于 RAG 系统的架构，我们揭示了这些攻击的根源。本研究不仅指出了当前 RAG 系统的安全漏洞，还提出了确保未来 RAG 系统安全的设计指南。

> Retrieval augmented generation (RAG) is a process where a large language model (LLM) retrieves useful information from a database and then generates the responses. It is becoming popular in enterprise settings for daily business operations. For example, Copilot for Microsoft 365 has accumulated millions of businesses. However, the security implications of adopting such RAG-based systems are unclear.
  In this paper, we introduce ConfusedPilot, a class of security vulnerabilities of RAG systems that confuse Copilot and cause integrity and confidentiality violations in its responses. First, we investigate a vulnerability that embeds malicious text in the modified prompt in RAG, corrupting the responses generated by the LLM. Second, we demonstrate a vulnerability that leaks secret data, which leverages the caching mechanism during retrieval. Third, we investigate how both vulnerabilities can be exploited to propagate misinformation within the enterprise and ultimately impact its operations, such as sales and manufacturing. We also discuss the root cause of these attacks by investigating the architecture of a RAG-based system. This study highlights the security vulnerabilities in today's RAG-based systems and proposes design guidelines to secure future RAG-based systems.

[Arxiv](https://arxiv.org/abs/2408.04870)