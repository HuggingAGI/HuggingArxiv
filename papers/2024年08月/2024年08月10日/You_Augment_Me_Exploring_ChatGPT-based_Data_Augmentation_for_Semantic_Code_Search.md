# 基于 ChatGPT 的数据增强技术：探索其在语义代码搜索中的增强效果

发布时间：2024年08月10日

`LLM应用` `软件开发` `人工智能`

> You Augment Me: Exploring ChatGPT-based Data Augmentation for Semantic Code Search

# 摘要

> 代码搜索在软件开发中至关重要，使开发者能通过自然语言查询高效检索和重用代码。尽管高质量数据能提升模型性能，但其获取成本高昂且充满挑战。近期，大型语言模型如ChatGPT在自然与编程语言处理上取得突破，通过简单提示实现友好交互。受此启发，我们提出ChatDANCE方法，利用ChatGPT生成的高质多样数据，并引入过滤机制剔除低质内容。我们设计了专为代码与查询定制的ChatGPT提示规则，利用ChatGPT重写代码与查询，并通过UniXcoder训练的交叉编码器过滤低匹配对。最终，我们用高质量增强数据重新训练模型。实验表明，ChatDANCE性能卓越，将最佳基线提升显著。令人惊喜的是，该策略使主干模型UniXcoder实现自我进化。广泛实验验证了各组件有效性，ChatDANCE在不同设置下表现稳定。我们还通过定性与定量分析揭示了其成功原因，即学习了更均匀的表示分布，并有效对齐了代码与查询空间。

> Code search plays a crucial role in software development, enabling developers to retrieve and reuse code using natural language queries. While the performance of code search models improves with an increase in high-quality data, obtaining such data can be challenging and expensive. Recently, large language models (LLMs) such as ChatGPT have made remarkable progress in both natural and programming language understanding and generation, offering user-friendly interaction via simple prompts. Inspired by these advancements, we propose a novel approach ChatDANCE, which utilizes high-quality and diverse augmented data generated by a large language model and leverages a filtering mechanism to eliminate low-quality augmentations. Specifically, we first propose a set of ChatGPT prompting rules that are specifically designed for source code and queries. Then, we leverage ChatGPT to rewrite code and queries based on the according prompts and then propose a filtering mechanism which trains a cross-encoder from the backbone model UniXcoder to filter out code and query pairs with low matching scores. Finally, we re-train the backbone model using the obtained high-quality augmented data. Experimental results show that ChatDANCE achieves state-of-the-art performance, improving the best baseline by 13.2% (R@1) and 7% (MRR). Surprisingly, we find that this augment-filter-retrain strategy enables the backbone model (UniXcoder) to self-grow. Moreover, extensive experiments show the effectiveness of each component and ChatDANCE has stable performance under different hyperparameter settings. In addition, we conduct qualitative and quantitative analyses to investigate why ChatDANCE works well and find that it learns a more uniform distribution of representations and effectively aligns the code and query spaces.

[Arxiv](https://arxiv.org/abs/2408.05542)