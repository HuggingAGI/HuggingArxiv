# 情感 RAG：借助情感检索提升角色扮演代理的能力

发布时间：2024年10月30日

`RAG` `人工智能`

> Emotional RAG: Enhancing Role-Playing Agents through Emotional Retrieval

# 摘要

> 鉴于大型语言模型（LLMs）具备高度的类人能力，角色扮演这一研究领域愈发受到关注，人们期望LLMs生成的响应能模仿人类的回答。这促使了在各类应用中对角色扮演代理的探索，像能与用户自然交流的聊天机器人，以及能提供个性化支持与引导的虚拟助手。角色扮演任务的关键在于有效利用角色记忆，其存储着角色的概况、经历和历史对话。检索增强生成（RAG）技术被用于获取相关记忆，以强化角色扮演代理的响应生成。现有的多数研究基于记忆的语义相似性来检索相关信息，以维持角色的个性化特点，而在LLMs的检索参数生成（RAG）中融入情感因素的尝试较少。受情绪依赖记忆理论的启发，该理论指出，如果人们在回忆时能以某种方式恢复学习时所经历的原始情绪，就能更好地回忆起事件，我们提出了一种全新的情感感知记忆检索框架，名为情感RAG，它在检索相关记忆时考虑了角色扮演代理的情绪状态。具体来说，我们设计了两种检索策略，即组合策略和顺序策略，在检索过程中同时兼顾记忆语义和情绪状态。在三个具有代表性的角色扮演数据集中开展的大量实验表明，我们的情感RAG框架在保持角色扮演代理的个性方面，优于未考虑情感因素的方法。这为进一步巩固心理学中的情绪依赖记忆理论提供了依据。

> As LLMs exhibit a high degree of human-like capability, increasing attention has been paid to role-playing research areas in which responses generated by LLMs are expected to mimic human replies. This has promoted the exploration of role-playing agents in various applications, such as chatbots that can engage in natural conversations with users and virtual assistants that can provide personalized support and guidance. The crucial factor in the role-playing task is the effective utilization of character memory, which stores characters' profiles, experiences, and historical dialogues. Retrieval Augmented Generation (RAG) technology is used to access the related memory to enhance the response generation of role-playing agents. Most existing studies retrieve related information based on the semantic similarity of memory to maintain characters' personalized traits, and few attempts have been made to incorporate the emotional factor in the retrieval argument generation (RAG) of LLMs. Inspired by the Mood-Dependent Memory theory, which indicates that people recall an event better if they somehow reinstate during recall the original emotion they experienced during learning, we propose a novel emotion-aware memory retrieval framework, termed Emotional RAG, which recalls the related memory with consideration of emotional state in role-playing agents. Specifically, we design two kinds of retrieval strategies, i.e., combination strategy and sequential strategy, to incorporate both memory semantic and emotional states during the retrieval process. Extensive experiments on three representative role-playing datasets demonstrate that our Emotional RAG framework outperforms the method without considering the emotional factor in maintaining the personalities of role-playing agents. This provides evidence to further reinforce the Mood-Dependent Memory theory in psychology.

[Arxiv](https://arxiv.org/abs/2410.23041)